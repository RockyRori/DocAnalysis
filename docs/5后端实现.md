2. 逻辑设计
```
yaml
複製程式碼
┌──────────┐
│ 批量入口  │───► for each file ──┐
└──────────┘                     │
                                  ▼
                         ┌─────────────────────┐
                         │ 文本提取模块         │
                         │ - docx: python-docx │
                         │ - pdf: pdfminer     │
                         └─────────────────────┘
                                  │
                                  ▼
                         ┌──────────────────┐
                         │ 文本预处理        │
                         │ - 分词/去停用词   │
                         │ - 规范化（小写）  │
                         └──────────────────┘
                                  │
                                  ▼
┌───────────────────┐     ┌───────────────────┐
│ 规则/模型加载      │───► │ 分类器            │
│ - 关键字字典       │     │ - 规则匹配 OR     │
│ - 训练好的 ML 模型 │     │   机器学习模型     │
└───────────────────┘     └───────────────────┘
                                  │
                                  ▼
                         ┌──────────────────┐
                         │ 标签汇总与返回    │
                         └──────────────────┘


```
文本提取模块

根据文件后缀调用对应解析器，抽取纯文本。

文本预处理

分句、分词、去除非字母/数字字符、去停用词。

分类模块

方案 A（规则+关键字）

预定义三类关键词表；若文档中出现某类关键词超过阈值，则打上该标签。

方案 B（机器学习）

使用 TF-IDF + SVM/LogisticRegression 训练多标签分类模型；预测时输出标签概率，自定义阈值。

方案 C（大語言模型）
在代碼中直接調用接口，判斷文檔類型。


方案 D（FastGPT）
構建一個FastGPT 工作流。

错误处理

提取失败或解析异常时，记录日志并返回空列表。

3. 实现设计
3.1 技术选型
文档解析

.docx：python-docx

.pdf：minerU

文本处理

nltk 或 spaCy（分词、去停用词）或FastGPT 或首頁

分类

规则：简单的词典 + 正则

ML：scikit-learn（TF-IDF + 多标签模型）

日志与异常

logging 模块

3.2 函数接口
python
複製程式碼

```
def classify_documents(dir_path: str, filenames: List[str]) -> Dict[str, List[str]]:
    """
    批量分类文档：
    - dir_path: 文档所在目录
    - filenames: 文件名列表（含扩展名）
    返回 {filename: [labels]}
    """
    ...

```
3.3 处理流程
遍历输入列表

加载并提取文本

根据后缀调度到 extract_text_docx 或 extract_text_pdf

文本预处理

清洗 → 分词 → 去停用

分类决策

规则版

对每一类关键词计数，若计数 ≥ N（阈值），则标签命中

模型版

Vectorizer.transform(text) → model.predict_proba(...) → 按概率阈值生成标签列表

结果封装

将每个文件的标签列表填入返回 dict

异常捕获

提取或分类异常时，将该文件标签设为 [] 并记录警告日志

3.4 扩展与部署
新增类别：

规则：在关键词配置文件里添加

模型：重新训练、更新模型文件

配置管理：

关键词、模型路径、阈值等放入 config.yaml

测试：

单元测试覆盖正常文档、空文档、损坏文档、不同标签组合